WindowManager:
    LoginWindow:
    ToolWindow:
        id: tools
    EditorWindow:


<LoginWindow>:
    name: "login"
    canvas.before:
        Color:
            rgba: [1.6, 0.6, 1.7, 1.0]
        Rectangle:
            pos: self.pos
            size: self.size


    BoxLayout:
        orientation: 'vertical'
        spacing: 20

        Label:
            id: Error
            text: "Veuillez entrer votre nom d'utilisateur et votre mot de passe:"
            font_size: 30
            text_size: cm(20), cm(5)
            halign: 'center'
            valign: 'middle'
            color: [1, 0, 0, 1]
            canvas.before:
                Color:
                    rgba: [3.0, 0.7, 4.3, 2.0]
                Rectangle:
                    pos: self.pos
                    size: self.size


        FloatLayout:

            Label:
                pos_hint: {"x":0.01, "y":0.6}
                size_hint: 0.2, 0.15
                text: "Username:"
                font_size: 30
                color: [1, 0, 0, 1]


            TextInput:
                id: Usrname
                hint_text: "Nom"
                pos_hint: {"x":0.2, "y":0.6}
                size_hint: 0.2, 0.15
                font_size: 20
                multiline: False

            Label:
                pos_hint: {"x":0.01, "y":0.3}
                size_hint: 0.2, 0.15
                text: "Password:"
                font_size: 30
                color: [1, 0, 0, 1]

            TextInput:
                id: Psw
                hint_text: "Mdp"
                font_size: 20
                pos_hint: {"x":0.2, "y":0.3}
                size_hint: 0.2, 0.15
                multiline: False


            Button:
                id: Submit
                text: "Se connecter"
                pos_hint: {"x":0.7, "y":0.35}
                size_hint: 0.2, 0.4
                background_color: [1.6, 0.6, 1.7, 1.0]
                on_press:
                    root.connexion()
                on_release:
                    app.root.current = "tool" if root.connexion() == True else "login"


<ToolWindow>:
    name: "tool"
    canvas.before:
        Color:
            rgba: [1.6, 0.6, 1.7, 1.0]
        Rectangle:
            pos: self.pos
            size: self.size


    BoxLayout:
        orientation: 'vertical'
        spacing: 20

        HListBox:
            id: HListBox

        HSortBox:
            id: HSortBox

        Label:
            id: Affichage
            text: "Cliquer sur un bouton:"
            font_size: 30
            color: [1, 0, 0, 1]

        Button:
            id: New
            text: 'Vers editeur'
            pos_hint: {"x":0.85, "y":0}
            size_hint: 0.15, 0.05
            background_color: [1.6, 0.6, 1.7, 1.0]
            on_press:
                root.new()
            on_release:
                app.root.current = "editor"



<HListBox>
    BoxLayout:
        orientation: 'horizontal'
        pos: root.pos

        Label:
            id: List_label
            text: 'Lister les :'
            color: [1, 0, 0, 1]

        Button:
            id: List
            text: 'choisir'
            background_color: [1.6, 0.6, 1.7, 1.0]
            on_press:
                app.root.ids.tools.open_list_choices()

        Button:
            id: Rechercher
            text: 'Go!'
            background_color: [1.6, 0.6, 1.7, 1.0]
            on_press:
                app.root.ids.tools.list()

<HSortBox>
    BoxLayout:
        orientation: 'horizontal'
        pos: root.pos

        Label:
            id: sort_label
            text: 'Trier sur base :'
            color: [1, 0, 0, 1]

        Button:
            id: SortList
            text: 'choisir'
            background_color: [1.6, 0.6, 1.7, 1.0]
            on_press:
                app.root.ids.tools.open_sort_choices()

        TextInput:
            id: Recherche
            hint_text: ""
            font_size: 20
            multiline: False

        Button:
            id: Rechercher
            text: 'Go!'
            background_color: [1.6, 0.6, 1.7, 1.0]
            on_press:
                app.root.ids.tools.sort_launcher()

<CustomDropDown>:
    Button:
        text: 'étudiants'
        size_hint_y: None
        height: 20
        on_release:
            app.root.ids.tools.list_choice = "students"
            app.root.ids.tools.ids.HListBox.ids.List.text = "étudiants"
            root.dismiss()
    Button:
        text: 'cours'
        size_hint_y: None
        height: 20
        on_release:
            app.root.ids.tools.list_choice = "courses"
            app.root.ids.tools.ids.HListBox.ids.List.text = "cours"
            root.dismiss()
    Button:
        text: 'fichiers'
        size_hint_y: None
        height: 20
        on_release:
            app.root.ids.tools.list_choice = "files"
            app.root.ids.tools.ids.HListBox.ids.List.text = "fichiers"
            root.dismiss()

<CustomDropDown2>:
    Button:
        text: 'des cours'
        size_hint_y: None
        height: 20
        on_release:
            app.root.ids.tools.sort_choice = "course"
            app.root.ids.tools.ids.HSortBox.ids.SortList.text = "du cours"
            root.dismiss()

    Button:
        text: 'des étiquettes'
        size_hint_y: None
        height: 20
        on_release:
            app.root.ids.tools.sort_choice = "tag"
            app.root.ids.tools.ids.HSortBox.ids.SortList.text = "de l'étiquette"
            root.dismiss()



<EditorWindow>:
    name: "editor"

    BoxLayout:
        orientation: 'vertical'
        spacing: 20

        TextInput:
            id:TextArea
            text: ""
            font_size: 30
            pos: self.pos
            size: self.size

            FloatLayout:
                Button:
                    id: open
                    text: 'ouvrir'
                    pos_hint: {"x":0.2, "y":0.1}
                    size_hint: 0.2, 0.15
                    background_color: [0, 1, 0, 1]
                    on_press:
                        root.open()

                Button:
                    id: register
                    text: 'enregistrer'
                    size_hint: (0.5, 0.15)
                    background_color: [0, 1, 0, 1]
                    on_press:
                        root.enregistrer_sous()

                Button:
                    id: Delete
                    text: 'Supprimer'
                    size_hint: (0.5, 0.15)
                    background_color: [0, 1, 0, 1]
                    on_press:
                        root.delete()

                Button:
                    id: Move
                    text: 'Deplacer'
                    size_hint: (0.5, 0.15)
                    background_color: [0, 1, 0, 1]
                    on_press:
                        root.deplacer()

                Button:
                    id: add_tag
                    text: 'Ajouter une étiquette'
                    size_hint: (0.5, 0.15)
                    background_color: [0, 1, 0, 1]
                    on_press:
                        root.file_add_tag_gui()

                Button:
                    id: add_course
                    text: 'Spécifier un cours'
                    size_hint: (0.5, 0.15)
                    background_color: [0, 1, 0, 1]
                    on_press:
                        root.file_add_course_gui()

                Button:
                    id: change_script
                    text: 'Script ?'
                    size_hint: (0.5, 0.15)
                    background_color: [0, 1, 0, 1]
                    on_press:
                        root.file_change_script_attribute_gui()

                Button:
                    text:"Outils"
                    size_hint: (0.5, 0.15)
                    background_color: [0, 1, 0, 1]
                    on_release:
                        app.root.current = "tool"

                Label:
                    id: Error
                    text: ""
                    font_size: 30
                    color: [1, 0, 0, 1]

                Label:
                    id: Affichage
                    text: "Cliquez sur un bouton:"
                    font_size: 30
                    color: [1, 0, 0, 1]
                    TextInput:
                        id: Recherche
                        text: "Recherche"
                        size_hint: (.2, None)
                        height: 30
                        multiline: False
                        font_size: 15
